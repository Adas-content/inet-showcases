<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../../../doc/showcases.css">
<title>Visualizing Transport Connections</title>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-240922-3', 'auto');
  ga('send', 'pageview');
</script>
</head>

<body>

<h1><center>Visualizing Transport Connections</center></h1>

<h2>Goals</h2>

<p>
In a large network with a complex topology, there might be many transport layer applications, and many nodes communicating. In such a case, it might be difficult to
see which nodes communicate with which, or if there is any communication at all.
Transport connection visualization makes it easy to get information about the active transport connections in the network at a glance.
Visualization makes it easy to identify connections by their two endpoints, and to tell different connections apart. It also gives a quick overview about
the number of connections in individual nodes and the whole network.
</p>

<p>
This showcase demonstrates the visualization of TCP connections via two example simulations.
</p>

<p>
INET version: <var>3.6</var><br>
Source files location: <var>inet/showcases/visualization/transportconnection</var>
</p>

<h2>About the visualizer</h2>

<p>
The <var>TransportConnectionVisualizer</var> (also part of <var>IntegratedVisualizer</var>) displays color-coded icons above the two endpoints of an active, established transport layer level connection. The icons will appear when the connection is established, and disappear when it is closed. Naturally, there can be multiple connections
open at a node, thus there can be multiple icons. Icons have the same color at both ends of the connection. In addition to colors, letter codes (A, B, AA, ...) may also be displayed to help in identifying connections. Note that this visualizer does not display the paths the packets take. If you are interested in that, take a look at
<var>TransportRouteVisualizer</var>, covered in the <a href="../../transportpathactivity/html/index.html" target="_blank">Visualizing Transport Path Activity</a> showcase.
</p>

<p>
The visualization is turned off by default, it can be turned on by setting the <var>displayTransportConnections</var> parameter of the visualizer to <var>true</var>.
</p>

<p>
It is possible to filter the connections being visualized.
By default, all connections are included. Filtering by hosts and port numbers can be achieved by setting the
<var>sourcePortFilter</var>, <var>destinationPortFilter</var>, <var>sourceNodeFilter</var> and <var>destinationNodeFilter</var> parameters.
</p>

<p>
The icon, colors and other visual properties can be configured by setting the visualizer's parameters.
</p>

<h2>Enabling the visualization of transport connections</h2>

<p>
The first example simulation, configured in the <var>EnablingVisualization</var> section of the ini file,  demonstrates the visualization with default settings.
This example simulation uses the following network:

<img class="screen" src="simplenetwork.png">

<p>
The network contains two <var>StandardHosts</var> connected to each other, each containing a TCP application. IP addresses and routing tables are configured by a <var>IPv4NetworkConfigurator</var> module. The visualizer module is a  <var>TransportConnectionVisualizer</var>.
The application in <var>host1</var> is configured to open a TCP connection to <var>host2</var>, and send data to it.
The visualization of transport connections is enabled with the visualizer's <var>displayTransportConnections</var> parameter:
</p>

<div class="snippet">
*.visualizer.*.displayTransportConnections = true
</div>

<p>
After the simulation is run for a while and the TCP connection is established, the icons representing the endpoints of the TCP connection will appear above the hosts. The network will look like the following:
</p>

<img class="screen" src="simpleconnection.png">

<h2>Multiple transport connections</h2>

<p>
This example simulation demonstrates the visualization of multiple connections, and the filtering of nodes and ports. It can be run by choosing the <var>MultipleConnections</var> configuration from the ini file. It uses the following network:
</p>

<img class="screen" src="complexnetwork.png">

<p>
There are two <var>StandardHosts</var> connected to a switch, which is connected via a router
to the server, another <var>StandardHost</var>. IP addresses and routing tables are configured by a <var>IPv4NetworkConfigurator</var> module. The visualizer module is an <var>IntegratedVisualizer</var>.
</p>

<p>
The hosts are configured to open TCP connections to the server:
</p>

<ul>
<li><var>host1</var>: two connections on port 80 (http), one connection on port 22 (ssh)</li>
<li><var>host2</var>: one connection on port 80, another one connection on port 22</li>
</ul>

<p>The visualizer is instructed to only visualize connections with destination port 80:</p>

<div class="snippet">
*.visualizer.*.transportConnectionVisualizer.destinationPortFilter = "80"
</div>

<p>
When the simulation is run and the connections are established, the network will look like the following.
Note that there are several icons above <var>host1</var> and the server, indicating multiple connections.
Endpoints can be matched by color.
</p>

<img class="screen" src="port80.png">

<p>
To visualize the connections that use port 22 at the server, the <var>destinationPortFilter</var> should be set to 22. The
network will look like this:
</p>

<img class="screen" src="port22.png">

<p>
Additionally, to visualize port 22 connections at <var>host2</var> only, the <var>sourceNodeFilter</var> parameter should be set to <var>host2</var>.
It looks like this:
</p>

<img class="screen" src="port22host2.png">

<!--
To differentiate connections with the same icon color, capital letters are displayed on the icon.
-->

<h2>Further information</h2>

For more information, refer to the <var>TransportConnectionVisualizer</var> NED documentation.

</body>

</html>