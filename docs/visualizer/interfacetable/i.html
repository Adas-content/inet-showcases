<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../../../doc/showcases.css">
<title>Visualizing Interface Tables</title>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-240922-3', 'auto');
  ga('send', 'pageview');
</script>
</head>

<body>

<h1>Displaying IP Addresses and Other Interface Information</h1>

<h2>Goals</h2>

<p>
In the simulation of complex networks, it is often useful to be able to display node IP addresses, interface names, etc. above the node icons or on the links.
For example, when automatic address assignment is used in a hierarchical network (e.g. using <var>IPv4NetworkConfigurator</var>), visual inspection can help
to verify that the result matches the expectations.
While it is true that addresses and other interface data can also be accessed in the GUI by diving into the interface tables of each node, that is tedious, and unsuitable for getting an overview. 
</p>

<p>
This example contains two configurations. The first one demonstrates the visualization with the visualizer's default settings,
the second one is about the advanced features.
</p>

<p>
INET version: <var>3.6</var><br>
Source files location: <var>inet/showcases/visualization/interfacetable</var>
</p>

<h2>About the visualizer</h2>

<p>
The <var>InterfaceTableVisualizer</var> module (included in the network as part of <var>IntegratedVisualizer</var>) displays data about network nodes' interfaces. (Interfaces are contained in interface tables, hence the name.)
By default, the visualization is turned off. When it is enabled using the
<var>displayInterfaceTables</var> parameter, the default is that interface names, IP addresses and netmask length are displayed, above the nodes (for wireless interfaces) and on the
links (for wired interfaces). 
By clicking on an interface label, details are displayed in the inspector panel.
</p>

<p>
The visualizer has several configuration parameters.
The <var>format</var> parameter specifies what information is displayed about interfaces.
It takes a format string, which can contain the following directives:
</p>


<ul style="font-family: monospace;">
<li>%N: interface name</li>
<li>%4: IPv4 address</li>
<li>%6: IPv6 address</li>
<li>%n: network address. This is either the IPv4 or the IPv6 address</li>
<li>%l: netmask length</li>
<li>%M: MAC address</li>
<li>%\: conditional newline for wired interfaces. The '\' needs to be escaped with another '\', i.e. '%\\'</li>
<li>%i and %s: the info() and str() functions for the interfaceEntry class, respectively</li>
</ul>

<p>
The default format string is <code>"%N %\\%n/%l"</code>, i.e. interface name, IP address and netmask length.
</p>

<p>
The set of visualized interfaces can be selected with the configurator's <var>nodeFilter</var> and <var>interfaceFilter</var>
parameters. By default, all interfaces of all nodes are visualized, except for loopback addresses (the default for the <var>interfaceFilter</var> parameter is <var>"not lo*"</var>.)
</p>

<p>
It is possible to display the labels for wired interfaces above the node icons, instead of on the links. 
This can be done by setting the <var>displayWiredInterfacesAtConnections</var> parameter to <code>false</code>.
</p>

<p>
There are also several parameters for styling, such as color and font selection.
</p>

<h2>Enabling the visualization</h2>

<p>
The first example demonstrates the default operation of the visualizer. The simulation uses the following network:
</p>

<img class="screen" src="simplenetwork.png">

<p>
The network contains two connected <var>StandardHosts</var>. IP addresses are auto-assigned by an <var>IPv4NetworkConfigurator</var> module.
</p>

<p>
We enable visualization by the following configuration line:
</p>

<div class="snippet">
*.visualizer.*.interfaceTableVisualizer.displayInterfaceTables = true
</div>

<p>
The interface names and the assigned IP addresses are displayed at the gates where the interfaces are connected.
When the simulation is run, the network looks like the following:
</p>

<img class="screen" src="simple.png">


<h2>More examples</h2>

<p>
In the following example, we'd like to show the usefulness of this visualizer in a dynamic scenario, as well as
demonstrate filtering. The simulation can be run by choosing the <var>AdvancedFeatures</var> configuration from the ini file. It uses the following network:
</p>

<img class="screen" src="advancednetwork.png">

<p>
It contains two <var>StandardHosts</var> connected to an <var>EtherSwitch</var>. The switch is connected to a <var>Router</var>, which is connected
to an <var>AccessPoint</var>. There is a <var>WirelessHost</var> and an <var>AdhocHost</var> near the access point. They will obtain their addresses from the router via DHCP. We would like to see IP addresses appear above the hosts
when they get their addresses.
</p>

<p>
We would like to hide the display of loopback addresses and of the unspecified address, so we set the following filter for the visualizer:
</p>

<div class="snippet">
*.visualizer.*.interfaceTableVisualizer.interfaceFilter = "not lo*  and not ipv4Address(&ltunspec&gt)"
</div>

<p>
</p>

<p>
Initially, the addresses of the wired interfaces of <var>host1</var>, <var>host2</var> and the router are visualized.
The wireless hosts have unspecified addresses, thus no interface indicator is displayed. The network looks like this:
</p>

<img class="screen" src="advancedbeginning.png">

<p>
When the wireless hosts have been associated with the access point and received their addresses from
the DHCP server, the new addresses will be displayed. The network will look like this:
</p>

<img class="screen" src="advanced.png">

<h2>Further information</h2>

<p>
For more information, refer to the <var>InterfaceTableVisualizer</var> NED documentation.
</p>

</body>

</html>