<html>
<head>
	<title>Error Rate Example</title>
	<link rel="stylesheet" type="text/css" href="../../../doc/showcases.css">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-240922-3', 'auto');
  ga('send', 'pageview');
</script>
</head>

<body>

	<h1><center>Packet loss vs. distance using various wifi bitrates</center></h1>

	<h2>Goals</h2>

	<p>
	In this showcase we perform a parameter study examining how packet error rate changes as a function of
	distance in a 802.11g wireless network. 
	</p>

	<p>
	Source files location: <var>inet/showcases/wireless/errorrate</var>
	</p>

	<!--TODO:

	Hogy konfigurálod be az inetet, hogy ilyen parameter study-t tudj csinálni

	effective bitrate <- throughput DONE
	bele vannak számolva a bit hibák miatti veszteségek

	- hogy keletkezett ez a diagram...milyen statistisztikákat recordoltak, hogy kell beállítani a chart-ot
	- "a 10^-13-ont nullának tekintjük" DONE
	- #!!! ezeket el kell magyarázni mert essential
	- ahol lehet mást választani ott elmondani hogy mit lehet DONE
	- SNIRThreshold vs Sensitivity DONE
	- sensitivity: DONE
	- minden SNIR-rel kapcsolatos dolog szimulációs optimalizáció DONE
	- Packet loss vs. distance using various wifi bitrates DONE
	- legyen g(erp)-vel DONE
	- freespacepathloss legyen? -> inkább tworay DONE
	- kell a táblázat / összehasonlítás ? -> referenciaként be lehet linkelni...mérnöki hibahatáron belül van DONE
	- NIST error model ne a goals-ba DONE
-->

	<!--
	TODO

	The Ieee80211NistErrorModel is based on the NIST error rate model, which is the default 802.11 error rate model in
	the ns-3 network simulator. URL HERE
	Which is based on [miller2003], done at NIST (Nation Institude of Standards and Technology)
	--> 

	<h2>The Model</h2>

	<p>The network contains two hosts operating in 802.11a ad-hoc mode at 10 mW transmission power. One of the hosts acts as traffic source, the other as traffic sink. 
		We will perform a parameter study with the distance and the bitrate as parameters.
		The distance will run between 10 and 550 meters, in 2 meter steps. The bitrate will take the following modes:
		6, 9, 12, 18, 24, 36, 48 and 54 Mbps. This results in about 2100 simulation runs. </p>

	<p>
	To make the model more realistic, we will simulate multipath propagation using the <var>TwoRayGroundReflection</var> path loss model. (There are various path loss models in INET, including <var>FreeSpacePathLoss</var>, <var>RayleighFading</var>, <var>RicianFading</var>, <var>LogNormalShadowing</var> and <var>NakagamiFading</var>). 
	The two ray ground reflection path loss model requires a ground model, which is configured in the
	<var>physicalEnvironment</var> module to be <var>FlatGround</var>. The heights of the hosts above the ground is set to 1.5 meters. We assume isotropic background noise of -86 dBm (<var>IsotropicScalarBackgroundNoise</var>.)
	</p>

<p>
We will use <var>Ieee80211NistErrorModel</var> to compute bit errors. The <var>Ieee80211NistErrorModel</var> is based on the Nist error rate model, which is the default 802.11 error model in
	the ns-3 network simulator. 
</p>

<p>
	In each simulation run, the source host will send a single packet to the destination host as a probe.
	At packet reception, the error model will compute bit error rate (BER) from the signal-to-noise-plus-interference-ratio (SNIR). Packet error rate (PER) will be computed from BER.
	The simulation records SNIR, BER, and PER. Note that in this simulation model, the physical layer simulation is entirely deterministic, hence there is no need for Monte Carlo.
</p>

<!--
- the snir threshold is important because when the transmission's snir is below this value, the reception is not simulated because it is assumed to be incorrect.
- thus we have to set the snir threshold low enough to get more fine-grained data at low snir levels
-->


<p>
We lower the <var>snirThreshold</var> parameter of the hosts' radios from 4 to 0 dB.
When the transmission's SNIR is below this value,
the reception is assumed to be incorrect, and the reception is not simulated.
Lowering the level results in more fine-grained data at low SNIR levels.
</p> 


	<h2>Results</h2>

	<p>SNIR, BER and PER are recorded from the simulation runs.
		 SNIR is measured at the receiver, and depends on the power of the noise and the power of the signal. The signal power decreases with distance, so SNIR does as well. SNIR is independent of modulations and coding schemes, so it is the same for all bitrates. This can be seen on the following plot, which displays SNIR against distance.
	</p>

	<p><img class="screen" src="SNIR_distance_v2.png"></p>


	<p>
		The next plot shows how packet error rate decreases with SNIR. Slower bitrates use simpler modulation like binary phase shift keying, which is more tolerant to noise than more complex
		modulations used by faster bitrates, hence the difference on the graph between the different bitrates.
	</p>

	<p><img class="screen" src="PER_SNIR_v3.png"></p>

	<p>The following plot shows the packet error rate vs distance. 
		Again, slower bitrates show less packet errors as the distance increases because of the simpler modulation.</p>

	<p><img class="screen" src="PER_distance_v3.png"></p>

	<p>We also compute the effetive bitrate, which is the gross bitrate decreased by packet errors. It is computed with the following formula:</p>
	<p><code>effective bitrate = (1-PER) * nominal bitrate</code></p>
	It is equal to the nominal data bitrate unless it is decreased because of bit errors as the distance increases. </p>

	<p>Effective bitrate vs distance is shown on the next plot. Higher bitrates are more sensitive to increases in distance, as the effective bitrate drops rapidly after a critical distance.
		This critical distance is farther for slower bitrates, and the decrease is not as rapid. 
	</p>


	<p><img class="screen" src="throughput_distance3.png"></p>

	<p>
	802.11 ranges depend on many variables, e.g. transmission power, receiver sensitivity,
	antenna gains and directionality, and background noise levels. The above ranges correspond to arbitrary values for the variables. In reality ranges can vary
	significantly.
	</p>


	<p><b>Conclusion</b></p>

	<p>Packet error rate increases quickly as the distance approaches the critical point. Slower bitrates are less sensitive to increasing distance, because they use simpler modulation. Faster bitrate modes
		are advantageous in short distances because of the increased throughput, but slower modes work better at longer distances. Furthermode, using rate adaptation, a host can use fast modes
		for short distances and slower modes for larger ones. When the number of lost packets increases and throughput drops, it becomes more
		viable to change to a slower bitrate mode. For example, the rate control algorithm could change to the slower bitrate at around the critical point,
		about where the curves for two adjacent bitrate modes intersect.
	</p>

	<h2>Further Information</h2>

	<p>
	More information can be found in the <a href="https://omnetpp.org/doc/inet/api-current/neddoc/index.html" target="_blank">INET Reference</a>.
	</p>

</body>