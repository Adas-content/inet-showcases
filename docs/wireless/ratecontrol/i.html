<head>
	<title>802.11 Rate Control</title>
	<link rel="stylesheet" type="text/css" href="../../../doc/showcases.css">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-240922-3', 'auto');
  ga('send', 'pageview');
</script>
</head>

<body>

	<h1><center>802.11 Rate Control</center></h1>

	<h2>Goals</h2>

	<p>This example demonstrates INET's 802.11 rate control mechanism,
	examining how rate control affects application level throughput.
	</p>

	<p>
	Source files location: <var>inet/showcases/wireless/ratecontrol</var>
	</p>

	<h2>The model</h2>

	<p>
	Two hosts will move around on the
		playground, while one of them will send a wireless UDP stream to the other. Sometimes the transmission
		will be partially blocked by an obstacle, causing packet loss. Scenarios will demonstrate how this affects the
		throughput when the hosts use rate control and when they don't.
	</p>

	<p><b>About rate control</b></p>

	<p>The physical layers of IEEE 802.11 devices are capable of transmitting at several different rates. The different rates can use different channel access methods, like orthogonal frequency division multiplexing (OFDM) or directs sequence spread spectrum (DSSS), and different modulation schemes like binary phase shift keying (BPSK) or
	 types of quadrature amplitude modulation (QAM). Each of these have different tolerances of effects like fading, attenuation and interference from other radio sources. In varying channel conditions,
		using the fastest rate might not be optimal for performance. Rate control algorithms adapt the transmission
		rate dynamically to the changing channel conditions, so the performance of the radio link can be maximized.
	</p>

	<p>
		For example, in certain channel conditions if hosts transmitted with 54 mbps, the transmissions would not be received correctly, and the throughput would drop to zero.
		However, transmissions with 6 mbps would be correctly receivable due to the simpler modulation (BPSK instead of 64QAM).
		It is not obvious which rate works the best with what channel conditions. The goal of rate control algorithms is to find the best rate, and maximize throughput.
	</p>

	<p><b>Rate control algorithms</b></p>

	<p>Some rate control algorithms change the transmission rate according to packet loss. When too many packets are lost (ie. the ACK for them doesn't arrive) the transmission rate is lowered. When a number of packets are sent without loss, the rate is increased.
	</p>

	<p>INET has different rate control models, such as <var>ARFRateControl</var>, <var>AARFRateControl</var> and
		<var>OnoeRateControl</var>.
	</p>

	<p><b>The network</b></p>

	<p>Two <var>StandardHosts</var> (<var>sourceHost</var> and <var>sinkHost</var>) are placed on the edge of the playground. During the simulation, they will move along the edge of the
		playground with different speeds, while <var>sourceHost</var> will send UDP packets to <var>sinkHost</var>. There is a forest
		 in the middle of the playground, acting as an obstacle. The line of
		transmission will intersect the obstacle at certain times, which will degrade transmissions.
	</p>

	<img class="screen" src="network2.png" width="850px">

	<p><b>Configuration</b></p>

	<p>
		Hosts are configured to operate in ad-hoc mode. <var>sourceHost</var> is configured to saturate the channel with UDP traffic when using the fastest
		mode, 54 Mbps. This way the maximum application level throughput can be measured
		at every bit rate.
	</p>

	<p>
		There are two configurations. In one of them, hosts use no rate control mechanism, and in the other they use
		 <var>Adaptive Auto Rate Fallback</var> (AARF). Results for the two simulation runs can be compared to show how the
		 use of rate control affects application level throughput.
	</p>

	<h2>Results</h2>

	<p>Below are two animations showing the hosts going around the obstacle. In the first video, the hosts don't use rate control, and always transmit with 54 Mbps. In the second video, hosts use <var>AARFRateControl</var>. The transmissions intersect the obstacle during the simulation.
		The path the transmission takes through the obstacle varies in length as the hosts are moving. When using rate control, <var>sinkHost</var> manages to receive more transmission succcessfully
		when transmissions go through the forest.
	</p>

	<video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" src="noratecontrol3.mp4" width="850" height="380"></video>

	<video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" src="aarf3.mp4" width="850" height="380"></video>

	<p>
		Bitrate and throughput are recorded during the simulations. The following plots show the nominal data bitrate and the actual application level throughput for the two configurations 
		(the values are in s and bps).
	</p>

	<img class="screen" src="noratecontrol2.png" width=850px>
	<img class="screen" src="aarf2.png" width=850px>

	<p>
		In the configuration where there is no rate control, the nominal bitrate is constantly 54 mbps. The throughput is around
		24 mbps when the transmissions are not obstructed by the forest. It decreases to zero when the forest gets between the hosts.
		In the other configuraton in which the hosts use rate control, the rate control algorithm changes the rate when transmissions
		go through the obstacle. The rate changes rapidly, which looks like if there were multiple levels on the graph. 
		Some transmissions can still be received correctly even though they go through the forest. The throughput decreases at first, but it's
		not zero. There are intervals where it decreases to zero, even though the rate is set to the lowest level (6 mbps). Throughput and nominal data rate for the two scenarios can be compared on the following plots.
	</p>

	<img class="screen" src="throughput2.png" width=850px>
	<img class="screen" src="bitrate2.png" width=850px>

	<p>The received packet count at <var>sinkHost</var> is 18366 for 'No rate control', and 35966 for 'AARFRateControl'.</p>

	<p><b>Conclusion</b></p>

	<p>This shows that rate control is effective in increasing the performance of the wireless network, as it increases throughput during
		varying channel conditions. Also, throughput is not zero in situations when it would be, if rate control wasn't used.
	</p>

	<p>
	More information can be found in the <a href="https://omnetpp.org/doc/inet/api-current/neddoc/index.html" target="_blank">INET Reference</a>.
	</p>

</body>