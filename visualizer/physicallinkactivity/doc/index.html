<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="../../../doc/showcases.css">
	<title>Visualizing Physical Link Activity</title>
</head>

<body>
	<h1>Visualizing Physical Link Activity</h1>

	<p><h2>Goals</h2></p>
    <p>
        In wireless networks, a received frame sometimes is not processed in the receiver network node as a result of some problem.
        At wireless networks a typical problem can be that the signal becomes too weak while spreading through the radio medium and the receiver can not process the frame.
        It would be useful to be able to observe frames that are received correctly to follow physical link activity between nodes.
    </p>
    <p>
        INET provides a visualizer, that shows between which nodes there is physical link activity.
        If physical link activity is visualized between two nodes that means the observed frame passes through the physical layer of the receiver node.
        On the other hand, by using physical link activity visualization we can display all nodes which are able to receive frames directly from the sender node.
    </p>
    <p>   
        The showcase consists of three simulations each demonstrating different features of physical link visualization.
    </p>
    <p>
        INET version: <var>3.6</var><br>
        Source files location: <var>inet/showcases/visualization/physicallinkactivity</var>
    </p>


    <p><h2>About the Visualizer</h2></p>
    <p>
        In INET, physical link activity can be visualized by including a <var>PhysicalLinkVisualizer</var> module in the simulation.
        Adding an <var>IntegratedVisualizer</var> module is also an option, because it also contains a <var>PhysicalLinkVisualizer</var> module.
        Physical link activity visualization is disabled by default, it can be enabled by setting the visualizer's <var>displayLinks</var> parameter to true.
    </p>
    <p>
        <var>PhysicalLinkVisualizer</var> observes frames that pass through the physical layer, i.e. are received correctly.
    </p>
    <p>
        The activity between two nodes is represented visually by a dotted arrow which points from the sender node to the receiver node.
        The arrow appears after the first frame has been received, then gradually fades out unless it is refreshed by further frames.
        Color, fading time and other graphical properties can be changed with parameters of the visualizer.
    </p>
    <p>
        By default, all packets, interfaces and nodes are considered for the visualization.
        This selection can be narrowed with the visualizer's <var>packetFilter</var>, <var>interfaceFilter</var>, and <var>nodeFilter</var> parameters.
    </p>


	<p><h2>Enabling Visualization of Physical Link Activity</h2></p>
    <p>
        The following example shows how to enable the visualization of physical link activity with its default settings.
        In the first example, we configure a simulation for an ad-hoc wireless network.
        This simulation can be run by choosing the <var>EnablingVisualization</var> configuration from the ini file.
    </p>
    <p>
        The network contains two <var>AdhocHosts</var>, <var>source</var> and <var>destination</var>.
        The <var>linkVisualizer's</var> type is <var>PhysicalLinkVisualizer</var>.
    </p>
    <img class="screen" src="PhysicalLinkVisualizerSimple.png">
    <p>
        In this configuration, <var>source</var> pings <var>destination</var>.
        Physical link activity visualization is enabled by setting the <var>displayLinks</var> parameter to true:
    </p>
    <div class="snippet">
        *.linkVisualizer.*.displayLinks = true
    </div>
    <p>
        The following animation shows what happens when we start the simulation:
    </p>
    <p align="center">        
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=622 height=407 src="EnablingVisualization_v0525.m4v">
    </p>
    <p>
        At the beginning of the video, a red strip appears and moves from <var>source</var> to <var>destination</var>. 
        This strip is the standard OMNeT++ animation for packet transmissions, and has nothing to do with <var>PhysicalLinkVisualizer</var>.
        A blue dotted line also appears at the same time. It can be ignored, as it is also part of the standard OMNeT++ packet animation.
        When the frame is received in whole by <var>destination</var> (the red strip disappears), a dotted arrow is added by <var>PhysicalLinkVisualizer</var> between the two hosts, indicating physical link activity.
        The frame's name is also displayed on the arrow.
        Here, the arrow fades out quickly, because the <var>fadeOutTime</var> parameter of the visualizer is set to a small value.
    </p>


    <p><h2>Filtering Physical Link Activity</h2></p>
    <p>
        In complex networks with many nodes and several protocols in use, it is often useful to be able to filter network traffic, and visualize only the part of the traffic we are interested in. 
    </p>
    <p>
        The following example shows how to set packet filtering.
        This simulation can be run by choosing the <var>Filtering</var> configuration from the ini file.
    </p>
    <p>
        We configure a wifi infrastructure mode network for this showcase.
        The network consists of one <var>accessPoint</var> and three <var>wirelessHosts</var> (<var>source</var>, <var>destination</var> and <var>host1</var>).
        In this configuration, the <var>source</var> host pings the <var>destination</var> host.
        The <var>host1</var> node does not generate any traffic except for connect to <var>accessPoint</var>.
    </p>
    <p>
        The communication range of the nodes is chosen so that <var>source</var> and <var>destination</var> cannot reach each other directly.
        The communication range of <var>source</var> is visualized as blue circle in the following picture. 
    </p>
    <img class="screen" src="Filtering_ShowCommRange.png">
    <p>
        For this network, the type of the <var>visualizer</var> is <var>IntegratedVisualizer</var>.
        Physical link activity visualization is filtered to display only ping traffic.
        Other frames, e.g. Beacon frames and ACK frames, are not visualized by <var>PhysicalLinkVisualizer</var>.
    </p>
    <p>
        We use the following configuration for the visualization:
    </p>
    <div class="snippet">
        *.visualizer.*.physicalLinkVisualizer.displayLinks = true<br>
        *.visualizer.*.physicalLinkVisualizer.packetFilter = "ping*"<br>
        *.visualizer.*.physicalLinkVisualizer.fadeOutTime = 5s
    </div>
    <p>
        The following video shows what happens when the simulation is run.
    </p>
    <p align="center">        
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=802 height=437 src="Filtering_v0529.m4v">
    </p>
    <p>
        You can see that although there are also ACK, Beacon and ping frames in the network, <var>PhysicalLinkVisualizer</var> displays only the latter, due to the presence of the <var>packetFilter</var> parameter.
        The ping frames travel between <var>source</var> and <var>destination</var> through <var>accessPoint</var>.
        The ping frames which are sent by <var>source</var> or <var>accessPoint</var> are received by <var>host1</var> too.
        This is, because <var>host1</var> is within the communication range of <var>source</var> and <var>accessPoint</var>, so <var>host1</var> is able to receive the ping frames.
    </p>


	<p><h2>Physical Link Activity in a Mobile Ad-Hoc Network</h2></p>
    <p>
        The goal of this simulation is visualizing dynamically changing physical link activity in a mobile wireless environment.
        This simulation can be run by choosing the <var>Mobile</var> configuration from the ini file.
    </p>
    <p>
        The network consists of seven nodes (<var>host1..host7</var>) that are <var>AdhocHost</var> type.
        The nodes are placed randomly on the playground and will also randomly roam within predefined borders.
        The communication range of nodes is reduced so that nodes can typically only communicate with some closer nodes.
    </p>
    <img class="screen" src="PhysicalLinkVisualizerDynamic.png">
    <p>
        The nodes send UDP packets in every second by an <var>UDPBasicApp</var> application.
        The packets' name are set to <var>Broadcast</var>.
        The nodes receive the <var>Broadcast</var> packets by an <var>UDPSink</var> application.
    </p>
    <p>        
        The visualizer's <var>packetFilter</var> parameter is set to display only <var>Broadcast</var> traffic.
    </p>
    <p>
        Here is the configuration of the visualization:
    </p>
    <div class="snippet">
        *.visualizer.*.physicalLinkVisualizer.displayLinks = true<br>
        *.visualizer.*.physicalLinkVisualizer.packetFilter = "*Broadcast*"<br>
        *.visualizer.*.physicalLinkVisualizer.fadeOutMode = "simulationTime"<br>
        *.visualizer.*.physicalLinkVisualizer.fadeOutTime = 5s<br>
    </div>
    <p>
        Here is what happens, when we run the simulation:
    </p>
    <p align="center">        
        <video autoplay loop controls onclick="this.paused ? this.play() : this.pause();" width=682 height=735 src="Mobile_v0529.m4v">
    </p>
    <p>
        The visualizer shows "connection graphs" whose vertices are the hosts, and each edge is physical link activity between two hosts. 
        It is changing between which nodes there is physical link activity, as a result of the nodes' movement.
    </p>


    <p><h2>More Information</h2></p>
    <p>
        This example only demonstrated the key features of physical link visualization. For more information, refer to the 
<var>PhysicalLinkVisualizer</var> NED documentation.
    </p>
</body>

</html>
